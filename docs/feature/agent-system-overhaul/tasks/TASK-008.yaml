agent_output:
  agent: "planner"
  schema_version: "1.0"
  payload:
    task_id: "TASK-008"
    task_type: "documentation"
    title: "Update dispatch-patterns.md for Perspective-Based Review"
    description: |
      Modify NewAgents/.github/agents/dispatch-patterns.md to update Pattern A (Sequential
      Dispatch) for perspective-based review and add FR-1 research findings.

      Changes:
      1. Update Pattern A review dispatch: Replace model references with review_perspective
         parameter (security-sentinel, architecture-guardian, pragmatic-verifier). Update
         evidence gate conditions for all-category review structure (3 perspectives Ã— 3 categories).

      2. Add FR-1 Research Findings section: Document VS Code runSubagent concurrency behavior
         findings. If true parallelism is not possible, document the platform limitation and
         optimize sequential dispatch order for minimum wall-clock time.

      3. Update evidence gate conditions: All 3 reviewers must submit findings. Each reviewer
         must cover all 3 categories. Zero blockers. Majority (â‰¥2/3) fully-approving reviewers.

      4. Add Phase 2 Enhancement section (AC-2.4): If VS Code API research reveals a working
         model routing mechanism, document how to layer model diversity on top of prompt
         perspective diversity.

      Focus on updating review-related dispatch patterns. Do not restructure non-review
      dispatch patterns.
    risk_classification: "ðŸŸ¡"
    wave: 3
    dependencies: ["TASK-004"]
    estimated_lines_changed: 50
    affected_files:
      - path: "NewAgents/.github/agents/dispatch-patterns.md"
        action: "modify"
    addresses_frs: ["FR-1", "FR-2", "FR-3"]
    relevant_context:
      - file: "docs/feature/agent-system-overhaul/design-output.yaml"
        sections:
          [
            "payload.file_inventory[path='NewAgents/.github/agents/dispatch-patterns.md']",
          ]
        reason: "dispatch-patterns.md modification description and FR mappings"
      - file: "docs/feature/agent-system-overhaul/design-output.yaml"
        sections:
          [
            "payload.review_design.perspectives",
            "payload.review_design.evidence_gate_queries",
          ]
        reason: "3 perspective definitions and updated evidence gate SQL queries for all-category review"
      - file: "docs/feature/agent-system-overhaul/spec-output.yaml"
        sections:
          [
            "payload.functional_requirements[id='FR-1']",
            "payload.functional_requirements[id='FR-2']",
            "payload.functional_requirements[id='FR-3']",
          ]
        reason: "AC-1.2/1.3 (dispatch pattern for parallelism), AC-2.4 (Phase 2 model diversity path), AC-3.3 (evidence gate validates all-category coverage)"
      - file: "docs/feature/agent-system-overhaul/review-verdicts/design-correctness.yaml"
        sections: ["findings[id='CORR-8']"]
        reason: "CORR-8: AC-2.4 Phase 2 model diversity enhancement path must be documented"
      - file: "NewAgents/.github/agents/dispatch-patterns.md"
        sections: ["Pattern A section"]
        reason: "Current Pattern A content to understand what needs updating"
    acceptance_criteria:
      - "Pattern A review dispatch uses review_perspective parameter instead of model parameter"
      - "Evidence gate conditions validate: 3 reviewers submitted, each covers 3 categories, zero blockers, majority fully-approving"
      - "FR-1 research findings section documents VS Code runSubagent concurrency behavior"
      - "Phase 2 Enhancement section exists documenting model diversity layering path (AC-2.4)"
      - "Non-review dispatch patterns are unchanged"
    verification_tier: "Standard"
